<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Printable QR Code Grid</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    @page {
      margin: 0.5in;
      size: letter;
    }
    body {
      margin: 0;
      padding-top: 1in;
      padding-left: 0;
      padding-right: 0;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      box-sizing: border-box;
    }
    #grid-container {
      width: 8in;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(1in, 1fr));
      grid-auto-rows: auto;
      grid-gap: 0.5in;
      padding: 0;
      box-sizing: border-box;
    }
    .qr-block {
      width: 1in;
      display: flex;
      flex-direction: column;
      align-items: center;
      page-break-inside: avoid;
      -webkit-print-color-adjust: exact;
    }
    .url-text, .rock-value {
      font-size: 9pt;
      font-weight: bold;
      margin: 0 0 4px 0;
      padding: 0;
      text-align: center;
      width: 100%;
      box-sizing: border-box;
    }
    .rock-value {
      margin-top: 4px;
      font-family: monospace;
    }
    canvas {
      width: 1in !important;
      height: 1in !important;
      margin: 0;
      padding: 0;
      display: block;
    }
    @media print {
      body {
        margin: 0;
        padding-top: 1in;
      }
      #grid-container {
        width: 8in;
        margin: 0 auto;
        grid-gap: 0.5in;
      }
    }
  </style>
</head>
<body>
  <div id="grid-container"></div>

  <script>
    const container = document.getElementById('grid-container');

    const paperWidthInches = 8;
    const paperHeightInches = 10.5;
    const qrSizeInches = 1;
    const gapInches = 0.5;

    const columns = Math.floor((paperWidthInches + gapInches) / (qrSizeInches + gapInches));
    let rows = Math.floor((paperHeightInches + gapInches - 1) / (qrSizeInches + gapInches));

    // Remove last row by subtracting 1
    rows = Math.max(rows - 1, 0);

    const totalQRCodes = columns * rows;

    for (let i = 0; i < totalQRCodes; i++) {
      const qrBlock = document.createElement('div');
      qrBlock.className = 'qr-block';

      const urlText = document.createElement('div');
      urlText.className = 'url-text';
      urlText.textContent = 'aidensrocks.com';

      const canvas = document.createElement('canvas');
      canvas.width = 96;
      canvas.height = 96;

      const rockValue = document.createElement('div');
      rockValue.className = 'rock-value';

      qrBlock.appendChild(urlText);
      qrBlock.appendChild(canvas);
      qrBlock.appendChild(rockValue);

      container.appendChild(qrBlock);

      const uniqueNumber = i + 1;
      const url = `https://aidensrocks.com/qr?r=${uniqueNumber}`;

      QRCode.toCanvas(canvas, url, { width: 96, margin: 0 }, function (error) {
        if (!error) {
          rockValue.textContent = `rock=${uniqueNumber}`;
        } else {
          rockValue.textContent = 'Error';
        }
      });
    }
  </script>
</body>
</html>
