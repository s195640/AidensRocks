# PostgreSQL Client Authentication Configuration File
# ===================================================
# This file controls: which hosts can connect, which databases they can access,
# which authentication methods they can use.

# Format:
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# --------------------------------------------------
# 1. Local connections (inside container/host)
# --------------------------------------------------
local   all             all                                     trust

# --------------------------------------------------
# 2. Loopback connections (from the same machine via TCP)
# --------------------------------------------------
host    all             all             127.0.0.1/32            md5
host    all             all             ::1/128                 md5

# --------------------------------------------------
# 3. LAN connections (adjust subnet to your network)
# --------------------------------------------------
host    all             all             192.168.1.0/24          md5

# --------------------------------------------------
# 4. Docker internal network connections (for replication/pglogical)
# --------------------------------------------------
# Allow all Postgres users from Docker bridge network (adjust subnet if needed)
host    all             all             172.0.0.0/8           md5

# Allow replication user 'repl' from Docker network
host    replication     repl            172.0.0.0/8           md5

# --------------------------------------------------
# 5. Optional: wide open external connections (use only if trusted)
# --------------------------------------------------
# host    all             all             0.0.0.0/0               md5
# host    all             all             ::/0                    md5
